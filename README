ğŸ“‘ Tabla de Contenidos

CaracterÃ­sticas

Arquitectura

TecnologÃ­as Usadas

Modelos Principales

InstalaciÃ³n

.env

Migraciones y Seeds

Ejecutar en Local

AutenticaciÃ³n JWT

Endpoints

Errores

âœ¨ CaracterÃ­sticas

SmartConnect proporciona una API RESTful completa con funcionalidades para:

ğŸ” AutenticaciÃ³n & Roles

JWT (access + refresh)

Usuario personalizado con email como login

Roles:

ADMIN â†’ CRUD total

OPERADOR â†’ solo lectura

ğŸ“¡ GestiÃ³n IoT

Sensores RFID con UID Ãºnico

AsociaciÃ³n a Usuario y Zona

Estado del sensor (ACTIVO / INACTIVO / BLOQUEADO / PERDIDO)

Control de barrera: ABIERTA / CERRADA

ğŸ“‹ Eventos

Registra accesos de sensores:

Tipo: INTENTO / MANUAL

Resultado: PERMITIDO / DENEGADO

ğŸ›¡ Validaciones y Seguridad

UID Ãºnico

Estados vÃ¡lidos

Manejo profesional de errores

Handlers JSON globales

ğŸ— Arquitectura del Proyecto
smartconnect/
â”‚
â”œâ”€â”€ accounts/        # Usuarios, roles, login, permisos
â”œâ”€â”€ zonas/           # Departamentos / Ã¡reas fÃ­sicas
â”œâ”€â”€ sensores/        # Sensores RFID, Barrera, Eventos
â”œâ”€â”€ api/             # ViewSets, routers, JWT, handlers
â”‚
â”œâ”€â”€ templates/       # Panel web (si usa)
â”œâ”€â”€ staticfiles/     # Archivos estÃ¡ticos para producciÃ³n
â”‚
â”œâ”€â”€ smartconnect/    # Settings, URLs, exception handlers
â”œâ”€â”€ requirements.txt
â””â”€â”€ manage.py

ğŸ§  TecnologÃ­as Usadas
Componente	TecnologÃ­a
Backend	Django 5
API	Django REST Framework
AutenticaciÃ³n	SimpleJWT
Base de datos	MySQL / MariaDB
Medios	Pillow
Entorno	python-dotenv
ProducciÃ³n	Gunicorn + Whitenoise
ğŸ”¢ Modelos Principales
ğŸ‘¤ UsuarioApp

Email como USERNAME_FIELD

Nombre, avatar, telÃ©fono

Intentos fallidos, bloqueo

Roles a travÃ©s de:

UserPerfil

UserPerfilAsignacion

ğŸŸ© Departamento

Nombre Ãºnico

Zona fÃ­sica de acceso

ğŸ“Ÿ Sensor

UID Ãºnico

Estado del sensor

FK â†’ Departamento

FK opcional â†’ Usuario asignado

ğŸ“˜ EventoAcceso

Tipo: INTENTO / MANUAL

Resultado PERMITIDO / DENEGADO

Sensor + Usuario (si aplica)

ğŸš§ Barrera

Estado: ABIERTA / CERRADA

Controlable desde API

ğŸ›  InstalaciÃ³n
git clone https://github.com/Bacorsx/smartconnect.git
cd smartconnect

Crear entorno virtual
Windows:
python -m venv venv
venv\Scripts\activate

Linux/Mac:
python3 -m venv venv
source venv/bin/activate

Instalar dependencias
pip install --upgrade pip
pip install -r requirements.txt

ğŸ” Archivo .env

Crear un archivo .env en la raÃ­z del proyecto:

SECRET_KEY=tu_clave_secreta
DEBUG=True

DB_NAME=smartconnect
DB_USER=root
DB_PASSWORD=tu_pass
DB_HOST=127.0.0.1
DB_PORT=3307

MEDIA_URL=/media/


âš ï¸ No subir este archivo a GitHub.

ğŸ“¦ Migraciones y Seeds
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py loaddata accounts/fixtures/seed.json

â–¶ï¸ Ejecutar en Local
python manage.py runserver

ğŸ” AutenticaciÃ³n JWT
Login

POST /api/auth/login/

Body:

{
  "email": "admin@gmail.com",
  "password": "123456"
}


Header:

Authorization: Bearer <access_token>

Refresh

POST /api/auth/refresh/

ğŸ“¡ Endpoints Principales
Recurso	Endpoint	MÃ©todos
Info	/api/info/	GET
Login	/api/auth/login/	POST
Refresh	/api/auth/refresh/	POST
Sensores	/api/sensores/	GET, POST
Sensor detalle	/api/sensores/{id}/	GET, PUT, DELETE
Zonas	/api/zonas/	CRUD
Eventos	/api/eventos/	GET, POST
Barrera	/api/barreras/	GET, PUT
ğŸš¨ Manejo de Errores (JSON Uniforme)
400 â€” ValidaciÃ³n
{
  "detail": "Datos invÃ¡lidos",
  "errors": { "uid": ["UID duplicado"] }
}

401 â€” Sin autenticaciÃ³n
{ "detail": "AutenticaciÃ³n requerida." }

403 â€” Sin permisos
{ "detail": "No tiene permisos para realizar esta acciÃ³n." }

404 â€” Recurso no encontrado
{ "detail": "Recurso no encontrado." }
{ "detail": "Ruta no encontrado." }